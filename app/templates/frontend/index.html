<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–Ü—Å—Ç–æ—Ä—ñ—è –õ–∞—Ç–∏–Ω—Å—å–∫–æ—ó –ê–º–µ—Ä–∏–∫–∏</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles/styles.css' %}">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <!-- –î–û–î–ê–ù–û: –°—Ç–∏–ª—ñ –¥–ª—è –º–æ–±—ñ–ª—å–Ω–æ—ó –∞–¥–∞–ø—Ç–∞—Ü—ñ—ó -->
    <style>
        /* –ë–∞–∑–æ–≤–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è, —â–æ–± –≤—ñ–¥—Å—Ç—É–ø–∏ –Ω–µ –ª–∞–º–∞–ª–∏ —à–∏—Ä–∏–Ω—É */
        * {
            box-sizing: border-box;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω—å: —â–æ–± –ø—Ä–∞–ø–æ—Ä–∏ –Ω–µ –≤–∏–ª–∞–∑–∏–ª–∏ –∑–∞ –µ–∫—Ä–∞–Ω */
        img {
            max-width: 100%;
            height: auto;
        }

        /* –ú–æ–±—ñ–ª—å–Ω—ñ —Å—Ç–∏–ª—ñ (—Å–ø—Ä–∞—Ü—å–æ–≤—É—é—Ç—å –Ω–∞ –µ–∫—Ä–∞–Ω–∞—Ö –≤—É–∂—á–µ 768px) */
        @media (max-width: 768px) {
            /* –®–∞–ø–∫–∞ —Å–∞–π—Ç—É: –ª–æ–≥–æ—Ç–∏–ø —ñ –º–µ–Ω—é —Å—Ç–∞—é—Ç—å —É —Å—Ç–æ–≤–ø—á–∏–∫ */
            .header-content {
                flex-direction: column;
                text-align: center;
                padding: 10px;
            }

            .main-nav ul {
                flex-direction: column; /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ */
                padding: 0;
                margin-top: 15px;
            }

            .main-nav li {
                margin: 10px 0; /* –ë—ñ–ª—å—à–∏–π –≤—ñ–¥—Å—Ç—É–ø –º—ñ–∂ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏ –¥–ª—è –ø–∞–ª—å—Ü—ñ–≤ */
            }

            /* –ó–º–µ–Ω—à—É—î–º–æ –≤—ñ–¥—Å—Ç—É–ø–∏ –≤ –æ—Å–Ω–æ–≤–Ω–∏—Ö —Å–µ–∫—Ü—ñ—è—Ö */
            .country-section, #intro, #map {
                padding: 15px;
                margin: 10px 0;
            }

            .content-wrapper {
                padding: 0;
            }

            /* –ö–∞—Ä—Ç–∞ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ –º–∞—î –±—É—Ç–∏ –º–µ–Ω—à–æ—é, —â–æ–± –Ω–µ –∑–∞–π–º–∞—Ç–∏ –≤–µ—Å—å –µ–∫—Ä–∞–Ω */
            #interactive-map {
                height: 300px !important; /* –ü–µ—Ä–µ–±–∏–≤–∞—î —ñ–Ω–ª–∞–π–Ω —Å—Ç–∏–ª—å 500px */
            }

            /* –ö–Ω–æ–ø–∫–∏ –ª–∞–π–∫—ñ–≤/–¥–∏–∑–ª–∞–π–∫—ñ–≤ —Ä–æ–±–∏–º–æ –∑—Ä—É—á–Ω—ñ—à–∏–º–∏ */
            .feedback-widget {
                display: flex;
                justify-content: space-around;
                margin-top: 15px;
            }

            .like-btn {
                padding: 10px 20px; /* –ë—ñ–ª—å—à–∞ –æ–±–ª–∞—Å—Ç—å –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è */
            }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="header-content">
            <a href="{% url 'index' %}" class="logo">
                <span class="logo-text">–ü–æ—Å—Ç–∫–æ–ª–æ–Ω—ñ–∞–ª—å–Ω–∞ –ï–ø–æ—Ö–∞</span>
            </a>
            <nav class="main-nav">
                <ul>
                    <li><a href="#intro">–í—Å—Ç—É–ø</a></li>
                    {% for country in countries %}
                        <li><a href="#country-{{ country.id }}">{{ country.main_title }}</a></li>
                    {% endfor %}
                    <li><a href="#map">–ö–∞—Ä—Ç–∞</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <section id="intro">
            <h2>üåç –í—Å—Ç—É–ø: –õ–∞—Ç–∏–Ω—Å—å–∫–∞ –ê–º–µ—Ä–∏–∫–∞ –ø—ñ—Å–ª—è 1945</h2>
        </section>

        {% for country in countries %}
        <section id="country-{{ country.id }}" class="country-section">
            <div class="content-wrapper">
                {% if country.flag %}
                    <img src="{{ country.flag.url }}" alt="–ü—Ä–∞–ø–æ—Ä {{ country.main_title }}" class="country-flag">
                {% endif %}
                <h2>{{ country.main_title }}</h2>

                {% for period in country.periods.all %}
                <article id="event-{{ period.id }}">
                    <h3>{{ period.description.title }}</h3>
                    <p>
                        {{ period.description.short_description }}
                        <a href="javascript:void(0)" class="read-more-btn" data-target="info-content-{{ period.id }}">
                            <strong>–ß–∏—Ç–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ...</strong>
                        </a>
                    </p>

                    <div id="info-content-{{ period.id }}" class="more-info" style="display: none;">
                        <p><strong>–î–µ—Ç–∞–ª—ñ:</strong> {{ period.description.detail }}</p>

                        <p>–©–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ–≤–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é, –ø–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞
                            <a href="{% url 'period_detail' period.id %}">–¥–µ—Ç–∞–ª—å–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É</a>.
                        </p>
                    </div>
                </article>
                {% endfor %}
            </div>
        </section>
        {% endfor %}

        <section id="map">
            <h2>üó∫Ô∏è –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –ö–∞—Ä—Ç–∞</h2>
            <div id="interactive-map" style="height: 500px;"></div>
        </section>
    </main>

    <footer>
        <center>
            <p>&copy; 2025 –Ü—Å—Ç–æ—Ä–∏—á–Ω–∏–π –ü—Ä–æ—î–∫—Ç.–†–æ–±–∏–≤ –Ü–≤–∞—à–∫–æ –Ü–ª–ª—è —ñ –ö–æ–≤–∞–ª—å–æ–≤ –î–∞–≤—ñ–¥</p>
        </center>
    </footer>

    <script>
        // Leaflet setup (—Å–∫–æ—Ä–æ—á–µ–Ω–æ –¥–ª—è –ø—Ä–∏–∫–ª–∞–¥—É)
        var map = L.map('interactive-map').setView([-10, -60], 3);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: 'OSM' }).addTo(map);

        // –ú–ê–†–ö–ï–†–ò –ö–ê–†–¢–ò (–∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –±–µ–∑ –∑–º—ñ–Ω)
        L.marker([-15.7797, -47.9297]).addTo(map).bindPopup('<strong>1. –ë—Ä–∞–∑–∏–ª—ñ–∞</strong><br>–ù–æ–≤–∞ —Å—Ç–æ–ª–∏—Ü—è, —Å–∏–º–≤–æ–ª –º–æ–¥–µ—Ä–Ω—ñ–∑–∞—Ü—ñ—ó.');
        L.marker([-22.9068, -43.1729]).addTo(map).bindPopup('<strong>2. –†—ñ–æ-–¥–µ-–ñ–∞–Ω–µ–π—Ä–æ</strong><br>–¶–µ–Ω—Ç—Ä –ø–æ–ª—ñ—Ç–∏—á–Ω–∏—Ö –ø–æ–¥—ñ–π.');
        L.marker([23.1136, -82.3666]).addTo(map).bindPopup('<strong>3. –ì–∞–≤–∞–Ω–∞</strong><br>–ï–ø—ñ—Ü–µ–Ω—Ç—Ä –ö—É–±–∏–Ω—Å—å–∫–æ—ó —Ä–µ–≤–æ–ª—é—Ü—ñ—ó.');
        L.marker([22.36, -81.16]).addTo(map).bindPopup('<strong>4. –ó–∞—Ç–æ–∫–∞ –°–≤–∏–Ω–µ–π</strong><br>–ú—ñ—Å—Ü–µ –Ω–µ–≤–¥–∞–ª–æ–≥–æ –≤—Ç–æ—Ä–≥–Ω–µ–Ω–Ω—è (1961).');
        L.marker([20.0083, -75.8267]).addTo(map).bindPopup('<strong>5. –°–∞–Ω—Ç—å—è–≥–æ-–¥–µ-–ö—É–±–∞</strong><br>–ú—ñ—Å—Ü–µ –ø–æ—á–∞—Ç–∫—É –ö—É–±–∏–Ω—Å—å–∫–æ—ó —Ä–µ–≤–æ–ª—é—Ü—ñ—ó.');
        L.marker([-23.5505, -46.6333]).addTo(map).bindPopup('<strong>6. –°–∞–Ω-–ü–∞—É–ª—É</strong><br>–ì–æ–ª–æ–≤–Ω–∏–π –ø—Ä–æ–º–∏—Å–ª–æ–≤–∏–π —Ü–µ–Ω—Ç—Ä.');
        // JS –¥–ª—è –∫–Ω–æ–ø–æ–∫ "–ß–∏—Ç–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ"
        document.querySelectorAll('.read-more-btn').forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('data-target');
                const targetElement = document.getElementById(targetId);
                const buttonText = this.querySelector('strong');

                if (targetElement.style.display === 'block') {
                    targetElement.style.display = 'none';
                    buttonText.textContent = '–ß–∏—Ç–∞—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ...';
                } else {
                    targetElement.style.display = 'block';
                    buttonText.textContent = '–°—Ö–æ–≤–∞—Ç–∏ –¥–µ—Ç–∞–ª—ñ';
                }
            });
        });

        // –¢—É—Ç –ø–æ—Ç—Ä—ñ–±–µ–Ω –≤–∞—à –∫–æ–¥ –¥–ª—è –ª–∞–π–∫—ñ–≤.
        // –ü—Ä–∏–º—ñ—Ç–∫–∞: –ó–∞—Ä–∞–∑ –≤—ñ–Ω –ø—Ä–∞—Ü—é—î —á–µ—Ä–µ–∑ LocalStorage.
        // –î–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –ë–î Django –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ AJAX (fetch).
    </script>